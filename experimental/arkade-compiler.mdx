---
title: "Arkade Compiler"
description: "Compiling Arkade Script to Bitcoin Taproot scripts"
icon: "gears"
---


<Warning>
  **Experimental Technology**
  
  The Arkade Compiler is experimental technology in active development. All code and examples presented here are for exploration and proof of concept purposes only. Do not use in production environments.
</Warning>

# Arkade Compiler

<Card title="Arkade Compiler" horizontal icon="github" href="https://github.com/arkade-os/compiler">
  Official repository for the Arkade Script compiler
</Card>

The Arkade Compiler transforms high-level Arkade Script contracts into optimized Bitcoin Taproot scripts. It handles the complexity of Bitcoin Script generation, allowing developers to focus on contract logic rather than low-level script details.


## Basic Usage

```bash
arkadec contract.ark
```

This will compile your Arkade Script contract to a JSON file that can be used with Bitcoin Taproot libraries.

## Compiler Architecture

The Arkade Compiler consists of several components:

1. **Lexer**: Tokenizes the source code
2. **Parser**: Builds an abstract syntax tree (AST)
3. **Type Checker**: Verifies type correctness
4. **Optimizer**: Optimizes the AST for efficient execution
5. **Code Generator**: Generates Bitcoin Script from the optimized AST

## Compilation Process

The compilation process follows these steps:

1. Parse the Arkade Script source code
2. Analyze the contract structure and dependencies
3. For each function in the contract:
   - Generate the cooperative path (with server signature)
   - Generate the unilateral path (with timelock)
4. Optimize the generated scripts
5. Generate the Taproot output structure
6. Output the compiled contract in JSON format

## Compiler Options

The Arkade Compiler supports several command-line options:

```bash
# Compile with optimization level 2 (more aggressive)
arkadec --opt-level=2 contract.ark

# Output assembly instead of bytecode
arkadec --output=asm contract.ark

# Generate debug information
arkadec --debug contract.ark

# Specify output file
arkadec --output-file=contract.json contract.ark
```

## Compilation Artifacts

The compiler produces a JSON file containing:

- Contract metadata (name, version, etc.)
- Constructor parameters
- Function definitions
- Generated script for each function (both cooperative and unilateral paths)
- Source map for debugging

Example output:

```json
{
  "contractName": "MyContract",
  "constructorInputs": [
    { "name": "user", "type": "pubkey" },
    { "name": "server", "type": "pubkey" }
  ],
  "functions": [
    {
      "name": "spend",
      "functionInputs": [
        { "name": "userSig", "type": "signature" }
      ],
      "serverVariant": true,
      "require": [
        { "type": "signature" },
        { "type": "serverSignature" }
      ],
      "asm": [
        "<user>",
        "<userSig>",
        "OP_CHECKSIG",
        "<SERVER_KEY>",
        "<serverSig>",
        "OP_CHECKSIG"
      ]
    },
    {
      "name": "spend",
      "functionInputs": [
        { "name": "userSig", "type": "signature" }
      ],
      "serverVariant": false,
      "require": [
        { "type": "signature" },
        { "type": "older", "message": "Exit timelock of 144 blocks" }
      ],
      "asm": [
        "<user>",
        "<userSig>",
        "OP_CHECKSIG",
        "144",
        "OP_CHECKLOCKTIMEVERIFY",
        "OP_DROP"
      ]
    }
  ],
  "source": "...",
  "compiler": {
    "name": "arkade-script",
    "version": "0.1.0"
  },
  "updatedAt": "2023-03-06T01:27:51.391557+00:00"
}
```

## Script Optimization

The Arkade Compiler includes several optimization passes:

- **Constant folding**: Evaluates constant expressions at compile time
- **Dead code elimination**: Removes unreachable code
- **Stack optimization**: Minimizes stack operations
- **Script size reduction**: Compresses the generated script

These optimizations help reduce transaction fees and improve execution efficiency.

## Debugging Support

The compiler provides debugging support through:

- Source maps linking Bitcoin Script operations to Arkade Script source code
- Detailed error messages with line and column information
- Warnings for potential issues
- Simulation mode for testing contract execution

## Integration with Development Tools

The Arkade Compiler integrates with other development tools:

- **Contract Simulator**: Test contract execution in various scenarios
- **Debugger**: Step through contract execution to identify issues
- **Contract Explorer**: Visualize contract state and execution paths

## Future Directions

The Arkade Compiler roadmap includes:

- **Formal verification**: Mathematical proof of contract correctness
- **Gas estimation**: Predicting transaction fees before deployment
- **Cross-contract compilation**: Supporting contract composition
- **Optimized library support**: Pre-compiled common contract patterns

## Contributing

Contributions to the Arkade Compiler are welcome! Areas where help is particularly valuable:

- Optimization techniques
- Testing infrastructure
- Documentation improvements
- New language features

Please refer to the contribution guidelines in the repository for more information.

---

<NextButton url="/contracts/arkade-syntax" text="Arkade Syntax" />
