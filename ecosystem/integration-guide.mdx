---
title: "Integration Guide"
description: "Step-by-step guide to integrating Arkade into your application"
icon: "plug"
---

This guide walks through integrating Arkade into your application, whether you're building a wallet, payment service, or financial application.

---

## Choose Your Integration Path

<CardGroup cols={2}>
<Card title="SDK Integration" icon="code">
  **Best for:** Wallets, apps, services
  
  Use the TypeScript SDK to add Arkade to your application with full control over UX.
</Card>
<Card title="API Integration" icon="server">
  **Best for:** Backend services, exchanges
  
  Integrate directly with the gRPC/REST API for server-side operations.
</Card>
</CardGroup>

---

## SDK Integration

### Step 1: Install the SDK

```bash
npm install @arklabs/wallet-sdk
```

### Step 2: Initialize the Client

```typescript
import { 
  ArkClient, 
  InMemoryKey, 
  DefaultStore,
  networks 
} from '@arklabs/wallet-sdk';

// For development
const client = await ArkClient.init({
  identity: InMemoryKey.fromMnemonic(userMnemonic),
  store: new DefaultStore(),
  network: networks.mutinynet,
  serverUrl: 'https://mutinynet.arkade.fun'
});

// For production
const client = await ArkClient.init({
  identity: InMemoryKey.fromMnemonic(userMnemonic),
  store: new DefaultStore(),
  network: networks.bitcoin,
  serverUrl: 'https://your-arkade-server.com'
});
```

### Step 3: Implement Core Flows

#### Receiving Payments

```typescript
// Get user's Arkade address
const address = client.offchainAddress;

// Display to user or encode as QR
console.log('Send payments to:', address);
```

#### Checking Balance

```typescript
const balance = await client.getBalance();

console.log('Available:', balance.offchain, 'sats');
console.log('Pending:', balance.pending, 'sats');
console.log('Settling:', balance.settling, 'sats');
```

#### Sending Payments

```typescript
try {
  const txid = await client.sendOffchain({
    address: recipientAddress,
    amount: 10000 // sats
  });
  console.log('Payment sent:', txid);
} catch (error) {
  if (error.code === 'INSUFFICIENT_BALANCE') {
    // Handle insufficient funds
  }
}
```

#### Boarding (L1 → Arkade)

```typescript
// Get boarding address for L1 deposits
const boardingAddress = client.boardingAddress;

// After user sends Bitcoin to boarding address and it confirms:
await client.board();
```

#### Exiting (Arkade → L1)

```typescript
// Collaborative exit (normal)
await client.sendOnchain({
  address: 'bc1q...',
  amount: 5000
});

// Or exit full balance
await client.sendOnchain({
  address: 'bc1q...',
  amount: balance.offchain
});
```

---

## API Integration

For backend services, integrate directly with the Arkade API.

### Authentication

Arkade uses public key authentication. Generate a key pair and register with the server.

### Core Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/v1/info` | GET | Server configuration |
| `/v1/vtxos` | GET | List user's VTXOs |
| `/v1/transactions` | POST | Submit transaction |
| `/v1/boarding` | GET | Get boarding address |

### Example: Check VTXOs

```bash
curl -X GET "https://your-server/v1/vtxos" \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -d '{"addresses": ["ark1q..."]}'
```

### Example: Submit Transaction

```bash
curl -X POST "https://your-server/v1/transactions" \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -d '{
    "signed_ark_tx": "base64...",
    "checkpoint_txs": ["base64...", "base64..."]
  }'
```

Full API reference: [ArkService API](/arkd/core-services/ark-service)

---

## Integration Patterns

### Pattern 1: Custodial Service

For exchanges or custodial wallets managing funds on behalf of users:

```
┌─────────────────────────────────────────────────┐
│              Your Backend Service               │
├─────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────────────────┐ │
│  │   User DB   │    │   Arkade Client         │ │
│  │  (balances) │◄──►│   (single wallet)       │ │
│  └─────────────┘    └──────────┬──────────────┘ │
│                                │                │
└────────────────────────────────┼────────────────┘
                                 │
                                 ▼
                          Arkade Server
```

- Single Arkade wallet for all users
- Track user balances in your database
- Batch user withdrawals for efficiency

### Pattern 2: Non-Custodial Wallet

For wallets where users control their own keys:

```
┌─────────────────────────────────────────────────┐
│              User's Device                       │
├─────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────────────────┐ │
│  │  User Keys  │───►│   Arkade Client         │ │
│  │  (local)    │    │   (per-user wallet)     │ │
│  └─────────────┘    └──────────┬──────────────┘ │
│                                │                │
└────────────────────────────────┼────────────────┘
                                 │
                                 ▼
                          Arkade Server
```

- Each user has their own Arkade wallet
- Keys never leave user's device
- Full self-custody

### Pattern 3: Hybrid (Your Keys, Our Server)

For services that manage infrastructure but not keys:

```
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  User Keys   │     │  Your API    │     │   Arkade     │
│  (local)     │────►│  (routing)   │────►│   Server     │
└──────────────┘     └──────────────┘     └──────────────┘
```

- Users sign transactions locally
- Your server relays to Arkade
- Analytics and monitoring without custody

---

## Handling VTXO Lifecycle

### Expiry Management

VTXOs expire after ~4 weeks. Handle this in your application:

```typescript
// Check for expiring VTXOs
const vtxos = await client.getVtxos();
const expiringSoon = vtxos.filter(v => 
  v.expiresAt < Date.now() + 7 * 24 * 60 * 60 * 1000 // 7 days
);

if (expiringSoon.length > 0) {
  // Notify user or auto-settle
  await client.settle();
}
```

### Delegation Setup

For users who may not be online regularly:

```typescript
// Enable delegation (user remains in control)
await client.enableDelegation({
  delegate: 'your-delegate-service-pubkey',
  autoRenew: true
});
```

---

## Testing Checklist

Before going to production:

- [ ] **Boarding** — L1 deposits convert to VTXOs
- [ ] **Sending** — Offchain payments work
- [ ] **Receiving** — Incoming payments detected
- [ ] **Settlement** — VTXOs batch swap correctly
- [ ] **Exit** — Funds return to L1
- [ ] **Expiry** — VTXO refresh or delegation works
- [ ] **Errors** — Insufficient balance, network issues handled
- [ ] **Edge cases** — Dust amounts, max amounts

---

## Production Readiness

### Server Options

| Option | Pros | Cons |
|--------|------|------|
| **Public server** | No infrastructure | Shared resources |
| **Dedicated server** | Full control, SLA | Operational overhead |
| **Self-hosted** | Maximum control | Requires expertise |

### Monitoring

Track these metrics:

- VTXO count and values
- Settlement frequency
- Expiry warnings
- API error rates

### Support

Need help with integration?

- **Technical questions:** [Telegram](https://t.me/arkade_os)
- **Partnership:** hello@arklabs.xyz
- **Bug reports:** [GitHub Issues](https://github.com/arkade-os/arkd/issues)

---

<CardGroup cols={2}>
<Card title="Zero to One" icon="rocket" href="/start/zero-to-one">
  End-to-end tutorial
</Card>
<Card title="SDK Reference" icon="book" href="/wallets/v0.3/setup">
  Full SDK documentation
</Card>
</CardGroup>
