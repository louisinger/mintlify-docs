---
title: "Receiving Payments"
description: "Learn how to receive Bitcoin payments with your Arkade wallet"
icon: "download"
---

## Overview

Receiving payments with Arkade is simple and efficient. Your wallet can generate addresses for both onchain and offchain (Ark) payments, allowing your users to send Bitcoin to you through either method.

## Getting Your Wallet Address

To receive payments, you first need to generate an address:

```typescript
// Get both on-chain and off-chain addresses
const addresses = await wallet.getAddress()

// The off-chain Ark address for instant payments
console.log('Ark Address:', addresses.offchain)

// The on-chain Bitcoin address
console.log('Bitcoin Address:', addresses.onchain)
```

## Ark Addresses

Ark addresses start with `ark1` on Bitcoin mainnet or `tark1` on testnet and regtest.

<Card title="Understanding Ark Addresses" icon="address-card" href="/wallets/ark-addresses">
  Learn about the technical structure of Ark addresses, how they're generated, and the security guarantees they provide.
</Card>

## Monitoring for Incoming Payments

To detect when payments are received, you can use the subscription API to monitor your address for incoming transactions in real-time.

### Setting Up a Subscription

```typescript
try {
  // Create an abort controller to manage the subscription lifecycle
  const abortController = new AbortController();
  
  // Subscribe to updates for your address
  const addresses = await wallet.getAddress();
  const subscription = arkProvider.subscribeForAddress(
    addresses.offchain,
    abortController.signal
  );
  
  // Process updates as they arrive
  for await (const update of subscription) {
    const vtxos = [...update.newVtxos, ...update.spentVtxos];
    if (vtxos.length === 0) {
      continue;
    }
    
    // Process the received VTXOs
    console.log('New VTXOs received:', update.newVtxos.length);
    console.log('VTXOs spent:', update.spentVtxos.length);
    
    // Process new payments
    await processNewVtxos(update.newVtxos);
  }
} catch (error) {
  console.error("Error processing address updates:", error);
}
```

### Processing Payment Updates

When a payment is received, you'll want to process the update and take appropriate actions:

```typescript
// Example function to process new VTXOs
async function processNewVtxos(newVtxos) {
  // Update your application state
  for (const vtxo of newVtxos) {
    console.log(`Received payment of ${vtxo.amount} sats`);
    
    // You might want to store the VTXO in your database
    await storeVtxoInDatabase(vtxo);
    
    // Notify the user
    showNotification(`Received ${vtxo.amount} sats!`);
    
    // Update the UI
    await refreshBalanceDisplay();
  }
}
```

### Cleaning Up Subscriptions

When your application no longer needs to listen for updates, make sure to clean up the subscription:

```typescript
// Clean up the subscription when done
abortController.abort();
```

This is important to prevent memory leaks and unnecessary network traffic, especially when your application is closing or navigating away from the payment screen.

### Best Practices

<Accordion title="Error Handling" icon="shield-check">
  Always implement proper error handling for your subscription to ensure your application remains stable even if there are network issues.
</Accordion>

<Accordion title="Reconnection Logic" icon="arrow-repeat">
  Consider implementing reconnection logic if the subscription is interrupted due to network issues.
</Accordion>

<Accordion title="Deduplication" icon="filter">
  Implement deduplication logic to ensure you don't process the same payment multiple times, especially if your application restarts.
</Accordion>

## Next Steps

- [Check Balances](/wallets/balances) - Learn how to verify your wallet balance after receiving payments
- [Send Payments](/wallets/sending-payments) - Learn how to send payments to others
- [Payment History](/wallets/payment-history) - Track all your received and sent payments

---

<NextButton url="/wallets/balances" text="Check Balances" />